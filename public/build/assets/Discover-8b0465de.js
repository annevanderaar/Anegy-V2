import{_ as $,k as y,i as s,m as t,o as n,e as m,a as r,w as a,b as f,t as c,F as _,p as B,c as h,n as P,d as S,q as L,f as G,I as A,L as R,D as T,S as U,J as j}from"./app-80abdd10.js";import{F as V}from"./FilterStore-04454bb2.js";import{F as q}from"./FavoriteStore-1d06e9de.js";import{C as x}from"./Cards-ff8f1c11.js";import{P as z}from"./PageHeader-704dd47d.js";const E=y({name:"Filter",data(){return{filterStore:V()}},computed:{genres(){return s().current("series.*")?this.filterStore.serieGenres:this.filterStore.movieGenres}},methods:{route:s,includes(e){return this.filterStore.selectedGenres.includes(e)},addGenre(e){if(this.includes(e)){const i=this.filterStore.selectedGenres.indexOf(e);this.filterStore.selectedGenres.splice(i,1),this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select;return}this.filterStore.selectedGenres.push(e),this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select},clearAllFilters(){this.filterStore.selectedGenres.splice(0),this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select},items(){let e;return s().current("series.*")?e="series":e="movies",[{text:this.$t("discover"),icon:"mdi-shuffle-variant",route:`${e}.discover`},{text:this.$t("trending"),icon:"mdi-fire",route:`${e}.trending`},{text:this.$t("popular"),icon:"mdi-chart-box",route:`${e}.popular`},{text:this.$t("playing"),icon:"mdi-play-circle-outline",route:`${e}.playing`},{text:this.$t("top_rated"),icon:"mdi-star",route:`${e}.top-rated`},{text:this.$t("upcoming"),icon:"mdi-calendar-month",route:`${e}.upcoming`}]},resetPage(){localStorage.currentPage=1}}}),J={class:"ml-2"},O={class:"d-flex justify-space-between align-content-center"},K={class:"ml-2 mt-2"},M={key:0};function Q(e,i,F,b,k,w){const d=t("v-col"),l=t("v-btn"),g=t("v-row"),p=t("v-divider"),v=t("v-icon"),u=t("v-list-item"),N=t("v-list"),D=t("v-tooltip"),I=t("v-container"),H=t("v-navigation-drawer");return n(),m("section",null,[r(H,{modelValue:e.filterStore.drawer,"onUpdate:modelValue":i[1]||(i[1]=o=>e.filterStore.drawer=o),temporary:!0,style:{width:"300px"}},{default:a(()=>[r(I,null,{default:a(()=>[r(g,null,{default:a(()=>[r(d,null,{default:a(()=>[f("h1",J,c(e.$t("filters.title")),1)]),_:1}),r(l,{icon:"mdi-close",variant:"plain",class:"text-black",onClick:i[0]||(i[0]=o=>e.filterStore.drawer=!1)})]),_:1}),r(p),r(N,null,{default:a(()=>[(n(!0),m(_,null,B(e.items(),(o,C)=>(n(),h(u,{key:C,href:e.route(o.route),class:P([{"highlight-page":e.route().current(o.route)},"mt-2"]),color:"accent",onClick:e.resetPage},{default:a(()=>[r(v,{icon:o.icon,class:"mr-3",color:"accent"},null,8,["icon"]),S(" "+c(o.text),1)]),_:2},1032,["href","class","onClick"]))),128))]),_:1}),e.route().current("series.discover")||e.route().current("movies.discover")?(n(),h(N,{key:0},{default:a(()=>[f("div",O,[f("h1",K,c(e.$t("filters.genres")),1),e.filterStore.selectedGenres.length>0?(n(),m("div",M,[r(D,{text:e.$t("filters.clear"),location:"left"},{activator:a(({props:o})=>[r(l,L(o,{icon:"mdi-text-box-remove",variant:"text",onClick:e.clearAllFilters}),null,16,["onClick"])]),_:1},8,["text"])])):G("",!0)]),r(p),(n(!0),m(_,null,B(e.genres,o=>(n(),h(u,{key:o.id,class:P({"highlight-genre":e.includes(o.id)}),onClick:C=>e.addGenre(o.id)},{default:a(()=>[S(c(o.name),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})):G("",!0)]),_:1})]),_:1},8,["modelValue"])])}const W=$(E,[["render",Q],["__scopeId","data-v-659167e9"]]);const X=y({name:"FilterButton",components:{IconButton:A},computed:{mobile(){return this.$vuetify.display.mobile}}});function Y(e,i,F,b,k,w){const d=t("IconButton"),l=t("v-btn");return e.mobile?(n(),h(d,{key:0,icon:"mdi-filter",color:"accent",class:"filterBtn"})):(n(),h(l,{key:1,class:"filterBtn",color:"accent"},{default:a(()=>[S(c(e.$t("filters.title")),1)]),_:1}))}const Z=$(X,[["render",Y],["__scopeId","data-v-27655efb"]]),ee=y({name:"Discover",components:{PageHeader:z,FilterButton:Z,Filter:W,Cards:x},data(){return{languageStore:R(),dataStore:T(),filterStore:V(),searchStore:U(),favoriteStore:q(),pageName:""}},computed:{data(){return this.dataStore.data},page(){return this.dataStore.page},translate(){return this.languageStore.translate},genres(){return this.filterStore.select},user(){return j().props.auth.user},refresh(){return this.favoriteStore.refresh},mobile(){return this.$vuetify.display.mobile}},methods:{getRoutes(){s().current("movies.discover")?(this.pageName=this.$t("discover",{name:this.$t("movies")}),this.dataStore.url="/discover/movie?"):s().current("movies.trending")?(this.pageName=this.$t("trending",{name:this.$t("movies")}),this.dataStore.url="/trending/movie/day?"):s().current("movies.popular")?(this.pageName=this.$t("popular",{name:this.$t("movies")}),this.dataStore.url="/movie/popular?"):s().current("movies.playing")?(this.pageName=this.$t("playing",{name:this.$t("movies")}),this.dataStore.url="/movie/now_playing?"):s().current("movies.top-rated")?(this.pageName=this.$t("top_rated",{name:this.$t("movies")}),this.dataStore.url="/movie/top_rated?"):s().current("movies.upcoming")&&(this.pageName=this.$t("upcoming",{name:this.$t("movies")}),this.dataStore.url="/movie/upcoming?"),s().current("series.discover")?(this.pageName=this.$t("discover",{name:this.$t("series")}),this.dataStore.url="/discover/tv?"):s().current("series.trending")?(this.pageName=this.$t("trending",{name:this.$t("series")}),this.dataStore.url="/trending/tv/day?"):s().current("series.popular")?(this.pageName=this.$t("popular",{name:this.$t("series")}),this.dataStore.url="/tv/popular?"):s().current("series.playing")?(this.pageName=this.$t("playing",{name:this.$t("series")}),this.dataStore.url="/tv/on_the_air?"):s().current("series.top-rated")?(this.pageName=this.$t("top_rated",{name:this.$t("series")}),this.dataStore.url="/tv/top_rated?"):s().current("series.upcoming")&&(this.pageName=this.$t("upcoming",{name:this.$t("series")}),this.dataStore.url="/tv/airing_today?"),this.dataStore.getDiscover(),this.getFavorites(),localStorage.currentPage&&(this.dataStore.page=parseInt(localStorage.currentPage))},scroll(){window.scrollTo({top:0,behavior:"smooth"})},getFavorites(){this.user&&this.favoriteStore.getFavorites(this.user.id)}},watch:{page(e){localStorage.currentPage=e,this.searchStore.searching?(this.searchStore.searchPage=e,this.searchStore.getSearch()):(this.dataStore.page=e,this.dataStore.getDiscover()),this.scroll()},translate(){this.dataStore.getDiscover()},genres(){this.dataStore.genres=this.filterStore.selectedGenres,this.dataStore.getDiscover()},refresh(){this.getFavorites()}},mounted(){this.getRoutes()}}),te={class:"text-center"};function re(e,i,F,b,k,w){const d=t("PageHeader"),l=t("FilterButton"),g=t("Filter"),p=t("Cards"),v=t("v-pagination");return n(),m(_,null,[r(d,{title:e.pageName},null,8,["title"]),r(l,{onClick:i[0]||(i[0]=u=>e.filterStore.drawer=!0)}),f("h1",te,c(e.pageName),1),r(g),r(p,{results:e.data.results},null,8,["results"]),r(v,{modelValue:e.dataStore.page,"onUpdate:modelValue":i[1]||(i[1]=u=>e.dataStore.page=u),length:e.dataStore.totalPages,"total-visible":e.mobile?4:10,color:"secondary",class:"my-4"},null,8,["modelValue","length","total-visible"])],64)}const le=$(ee,[["render",re]]);export{le as default};
