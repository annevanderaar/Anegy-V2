import{q as T,k as G,i,_ as y,m as r,o as n,e as c,a as t,w as o,b as h,t as l,F as S,p as C,c as p,n as N,d as $,s as M,f as k,L as R,D as W,S as x,J as I}from"./app-d2cccad7.js";import{F as L}from"./FavoriteStore-09c9ff19.js";import{C as U}from"./Cards-94a731ea.js";import{P as j}from"./PageHeader-5441aea8.js";const P=T("filter",{state:()=>({drawer:!1,selectedGenres:[],select:!0,movieGenres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],serieGenres:[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}]})});const q=G({name:"Filter",data(){return{filterStore:P()}},computed:{genres(){return i().current("series.*")?this.filterStore.serieGenres:this.filterStore.movieGenres}},methods:{route:i,includes(e){return this.filterStore.selectedGenres.includes(e)},addGenre(e){if(this.includes(e)){const a=this.filterStore.selectedGenres.indexOf(e);this.filterStore.selectedGenres.splice(a,1),this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select;return}this.filterStore.selectedGenres.push(e),this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select},clearAllFilters(){this.filterStore.selectedGenres.splice(0),this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select},items(){let e;return i().current("series.*")?e="series":e="movies",[{text:this.$t("discover"),icon:"mdi-shuffle-variant",route:`${e}.discover`},{text:this.$t("trending"),icon:"mdi-fire",route:`${e}.trending`},{text:this.$t("popular"),icon:"mdi-chart-box",route:`${e}.popular`},{text:this.$t("playing"),icon:"mdi-play-circle-outline",route:`${e}.playing`},{text:this.$t("top_rated"),icon:"mdi-star",route:`${e}.top-rated`},{text:this.$t("upcoming"),icon:"mdi-calendar-month",route:`${e}.upcoming`}]},resetPage(){localStorage.currentPage=1}}}),z={class:"ml-2"},E={class:"d-flex justify-space-between align-content-center"},J={class:"ml-2 mt-2"},K={key:0};function O(e,a,g,D,b,V){const v=r("v-col"),m=r("v-btn"),f=r("v-row"),u=r("v-divider"),_=r("v-icon"),d=r("v-list-item"),F=r("v-list"),B=r("v-tooltip"),A=r("v-container"),H=r("v-navigation-drawer");return n(),c("section",null,[t(H,{modelValue:e.filterStore.drawer,"onUpdate:modelValue":a[1]||(a[1]=s=>e.filterStore.drawer=s),temporary:!0,style:{width:"300px"}},{default:o(()=>[t(A,null,{default:o(()=>[t(f,null,{default:o(()=>[t(v,null,{default:o(()=>[h("h1",z,l(e.$t("filters.title")),1)]),_:1}),t(m,{icon:"mdi-close",variant:"plain",class:"text-black",onClick:a[0]||(a[0]=s=>e.filterStore.drawer=!1)})]),_:1}),t(u),t(F,null,{default:o(()=>[(n(!0),c(S,null,C(e.items(),(s,w)=>(n(),p(d,{key:w,href:e.route(s.route),class:N([{"highlight-page":e.route().current(s.route)},"mt-2"]),color:"accent",onClick:e.resetPage},{default:o(()=>[t(_,{icon:s.icon,class:"mr-3",color:"accent"},null,8,["icon"]),$(" "+l(s.text),1)]),_:2},1032,["href","class","onClick"]))),128))]),_:1}),e.route().current("series.discover")||e.route().current("movies.discover")?(n(),p(F,{key:0},{default:o(()=>[h("div",E,[h("h1",J,l(e.$t("filters.genres")),1),e.filterStore.selectedGenres.length>0?(n(),c("div",K,[t(B,{text:e.$t("filters.clear"),location:"left"},{activator:o(({props:s})=>[t(m,M(s,{icon:"mdi-text-box-remove",variant:"text",onClick:e.clearAllFilters}),null,16,["onClick"])]),_:1},8,["text"])])):k("",!0)]),t(u),(n(!0),c(S,null,C(e.genres,s=>(n(),p(d,{key:s.id,class:N({"highlight-genre":e.includes(s.id)}),onClick:w=>e.addGenre(s.id)},{default:o(()=>[$(l(s.name),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})):k("",!0)]),_:1})]),_:1},8,["modelValue"])])}const Q=y(q,[["render",O],["__scopeId","data-v-659167e9"]]);const X={};function Y(e,a){const g=r("v-btn");return n(),p(g,{class:"filterBtn",color:"accent"},{default:o(()=>[$(l(e.$t("filters.title")),1)]),_:1})}const Z=y(X,[["render",Y],["__scopeId","data-v-81176582"]]),ee=G({name:"Discover",components:{PageHeader:j,FilterButton:Z,Filter:Q,Cards:U},data(){return{languageStore:R(),dataStore:W(),filterStore:P(),searchStore:x(),favoriteStore:L(),pageName:""}},computed:{data(){return this.dataStore.data},page(){return this.dataStore.page},translate(){return this.languageStore.translate},genres(){return this.filterStore.select},user(){return I().props.auth.user},refresh(){return this.favoriteStore.refresh}},methods:{getRoutes(){i().current("movies.discover")?(this.pageName=this.$t("discover",{name:this.$t("movies")}),this.dataStore.url="/discover/movie?"):i().current("movies.trending")?(this.pageName=this.$t("trending",{name:this.$t("movies")}),this.dataStore.url="/trending/movie/day?"):i().current("movies.popular")?(this.pageName=this.$t("popular",{name:this.$t("movies")}),this.dataStore.url="/movie/popular?"):i().current("movies.playing")?(this.pageName=this.$t("playing",{name:this.$t("movies")}),this.dataStore.url="/movie/now_playing?"):i().current("movies.top-rated")?(this.pageName=this.$t("top_rated",{name:this.$t("movies")}),this.dataStore.url="/movie/top_rated?"):i().current("movies.upcoming")&&(this.pageName=this.$t("upcoming",{name:this.$t("movies")}),this.dataStore.url="/movie/upcoming?"),i().current("series.discover")?(this.pageName=this.$t("discover",{name:this.$t("series")}),this.dataStore.url="/discover/tv?"):i().current("series.trending")?(this.pageName=this.$t("trending",{name:this.$t("series")}),this.dataStore.url="/trending/tv/day?"):i().current("series.popular")?(this.pageName=this.$t("popular",{name:this.$t("series")}),this.dataStore.url="/tv/popular?"):i().current("series.playing")?(this.pageName=this.$t("playing",{name:this.$t("series")}),this.dataStore.url="/tv/on_the_air?"):i().current("series.top-rated")?(this.pageName=this.$t("top_rated",{name:this.$t("series")}),this.dataStore.url="/tv/top_rated?"):i().current("series.upcoming")&&(this.pageName=this.$t("upcoming",{name:this.$t("series")}),this.dataStore.url="/tv/airing_today?"),this.dataStore.getDiscover(),this.getFavorites(),localStorage.currentPage&&(this.dataStore.page=parseInt(localStorage.currentPage))},scroll(){window.scrollTo({top:0,behavior:"smooth"})},getFavorites(){this.user&&this.favoriteStore.getFavorites(this.user.id)}},watch:{page(e){localStorage.currentPage=e,this.searchStore.searching?(this.searchStore.searchPage=e,this.searchStore.getSearch()):(this.dataStore.page=e,this.dataStore.getDiscover()),this.scroll()},translate(){this.dataStore.getDiscover()},genres(){this.dataStore.genres=this.filterStore.selectedGenres,this.dataStore.getDiscover()},refresh(){this.getFavorites()}},mounted(){this.getRoutes()}}),te={class:"text-center"};function re(e,a,g,D,b,V){const v=r("PageHeader"),m=r("FilterButton"),f=r("Filter"),u=r("Cards"),_=r("v-pagination");return n(),c(S,null,[t(v,{title:e.pageName},null,8,["title"]),t(m,{onClick:a[0]||(a[0]=d=>e.filterStore.drawer=!0)}),h("h1",te,l(e.pageName),1),t(f),t(u,{results:e.data.results},null,8,["results"]),t(_,{modelValue:e.dataStore.page,"onUpdate:modelValue":a[1]||(a[1]=d=>e.dataStore.page=d),length:e.dataStore.totalPages,"total-visible":10,color:"secondary",class:"my-4"},null,8,["modelValue","length"])],64)}const ne=y(ee,[["render",re]]);export{ne as default};
