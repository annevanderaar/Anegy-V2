import{_ as $,k as y,D as G,i as o,m as r,o as n,e as d,a as t,w as a,b as p,t as l,F as S,p as B,c as v,n as P,d as g,q as U,f as V,I as A,L as T,S as j,J as q}from"./app-392eb6b1.js";import{F as D}from"./FilterStore-b9d05101.js";import{F as z}from"./FavoriteStore-ce97c707.js";import{C as E}from"./Cards-cc8aca25.js";import{P as J}from"./PageHeader-bec9e2a0.js";const O=y({name:"Filter",data(){return{dataStore:G(),filterStore:D(),rating:[0,10]}},computed:{genres(){return o().current("series.*")?this.filterStore.serieGenres:this.filterStore.movieGenres}},methods:{route:o,includes(e){return this.filterStore.selectedGenres.includes(e)},reset(){this.filterStore.drawer=!1,this.filterStore.select=!this.filterStore.select},addGenre(e){if(this.includes(e)){const i=this.filterStore.selectedGenres.indexOf(e);this.filterStore.selectedGenres.splice(i,1),this.reset();return}this.filterStore.selectedGenres.push(e),this.reset()},clearAllFilters(){this.filterStore.selectedGenres.splice(0),this.reset()},items(){let e;return o().current("series.*")?e="series":e="movies",[{text:this.$t("discover"),icon:"mdi-shuffle-variant",route:`${e}.discover`},{text:this.$t("trending"),icon:"mdi-fire",route:`${e}.trending`},{text:this.$t("popular"),icon:"mdi-chart-box",route:`${e}.popular`},{text:this.$t("playing"),icon:"mdi-play-circle-outline",route:`${e}.playing`},{text:this.$t("top_rated"),icon:"mdi-star",route:`${e}.top-rated`},{text:this.$t("upcoming"),icon:"mdi-calendar-month",route:`${e}.upcoming`}]},resetPage(){localStorage.currentPage=1},addRating(){this.dataStore.rating=this.rating,this.reset()}}}),K={class:"ml-2"},M={key:0},Q={class:"ml-2 mt-2"},W={class:"d-flex justify-space-between align-content-center"},X={class:"ml-2"},Y={key:0};function Z(e,i,b,F,k,C){const u=r("v-col"),c=r("v-btn"),f=r("v-row"),m=r("v-divider"),_=r("v-icon"),h=r("v-list-item"),N=r("v-list"),I=r("v-range-slider"),R=r("v-tooltip"),H=r("v-container"),L=r("v-navigation-drawer");return n(),d("section",null,[t(L,{modelValue:e.filterStore.drawer,"onUpdate:modelValue":i[2]||(i[2]=s=>e.filterStore.drawer=s),temporary:!0,style:{width:"300px"}},{default:a(()=>[t(H,null,{default:a(()=>[t(f,null,{default:a(()=>[t(u,null,{default:a(()=>[p("h1",K,l(e.$t("filters.title")),1)]),_:1}),t(c,{icon:"mdi-close",variant:"plain",class:"text-black",onClick:i[0]||(i[0]=s=>e.filterStore.drawer=!1)})]),_:1}),t(m),t(N,null,{default:a(()=>[(n(!0),d(S,null,B(e.items(),(s,w)=>(n(),v(h,{key:w,href:e.route(s.route),class:P([{"highlight-page":e.route().current(s.route)},"mt-2"]),color:"accent",onClick:e.resetPage},{default:a(()=>[t(_,{icon:s.icon,class:"mr-3",color:"accent"},null,8,["icon"]),g(" "+l(s.text),1)]),_:2},1032,["href","class","onClick"]))),128))]),_:1}),e.route().current("series.discover")||e.route().current("movies.discover")?(n(),d("div",M,[p("h1",Q,l(e.$t("filters.rating")),1),t(m),t(I,{modelValue:e.rating,"onUpdate:modelValue":i[1]||(i[1]=s=>e.rating=s),strict:!0,min:0,max:10,step:.1,"thumb-label":"always",color:"accent",class:"mt-6"},null,8,["modelValue"]),t(c,{color:"accent ml-2",onClick:e.addRating},{default:a(()=>[g(l(e.$t("filters.title")),1)]),_:1},8,["onClick"]),t(N,null,{default:a(()=>[p("div",W,[p("h1",X,l(e.$t("filters.genres")),1),e.filterStore.selectedGenres.length>0?(n(),d("div",Y,[t(R,{text:e.$t("filters.clear"),location:"left"},{activator:a(({props:s})=>[t(c,U(s,{icon:"mdi-text-box-remove",variant:"text",onClick:e.clearAllFilters}),null,16,["onClick"])]),_:1},8,["text"])])):V("",!0)]),t(m),(n(!0),d(S,null,B(e.genres,s=>(n(),v(h,{key:s.id,class:P({"highlight-genre":e.includes(s.id)}),onClick:w=>e.addGenre(s.id)},{default:a(()=>[g(l(s.name),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})])):V("",!0)]),_:1})]),_:1},8,["modelValue"])])}const x=$(O,[["render",Z],["__scopeId","data-v-050d7d60"]]);const ee=y({name:"FilterButton",components:{IconButton:A},computed:{mobile(){return this.$vuetify.display.mobile}}});function te(e,i,b,F,k,C){const u=r("IconButton"),c=r("v-btn");return e.mobile?(n(),v(u,{key:0,icon:"mdi-filter",color:"accent",class:"filterBtn"})):(n(),v(c,{key:1,class:"filterBtn",color:"accent"},{default:a(()=>[g(l(e.$t("filters.title")),1)]),_:1}))}const re=$(ee,[["render",te],["__scopeId","data-v-27655efb"]]),se=y({name:"Discover",components:{PageHeader:J,FilterButton:re,Filter:x,Cards:E},data(){return{languageStore:T(),dataStore:G(),filterStore:D(),searchStore:j(),favoriteStore:z(),pageName:""}},computed:{data(){return this.dataStore.data},page(){return this.dataStore.page},translate(){return this.languageStore.translate},genres(){return this.filterStore.select},user(){return q().props.auth.user},refresh(){return this.favoriteStore.refresh},mobile(){return this.$vuetify.display.mobile}},methods:{getRoutes(){o().current("movies.discover")?(this.pageName=this.$t("discover",{name:this.$t("movies")}),this.dataStore.url="/discover/movie?"):o().current("movies.trending")?(this.pageName=this.$t("trending",{name:this.$t("movies")}),this.dataStore.url="/trending/movie/day?"):o().current("movies.popular")?(this.pageName=this.$t("popular",{name:this.$t("movies")}),this.dataStore.url="/movie/popular?"):o().current("movies.playing")?(this.pageName=this.$t("playing",{name:this.$t("movies")}),this.dataStore.url="/movie/now_playing?"):o().current("movies.top-rated")?(this.pageName=this.$t("top_rated",{name:this.$t("movies")}),this.dataStore.url="/movie/top_rated?"):o().current("movies.upcoming")&&(this.pageName=this.$t("upcoming",{name:this.$t("movies")}),this.dataStore.url="/movie/upcoming?"),o().current("series.discover")?(this.pageName=this.$t("discover",{name:this.$t("series")}),this.dataStore.url="/discover/tv?"):o().current("series.trending")?(this.pageName=this.$t("trending",{name:this.$t("series")}),this.dataStore.url="/trending/tv/day?"):o().current("series.popular")?(this.pageName=this.$t("popular",{name:this.$t("series")}),this.dataStore.url="/tv/popular?"):o().current("series.playing")?(this.pageName=this.$t("playing",{name:this.$t("series")}),this.dataStore.url="/tv/on_the_air?"):o().current("series.top-rated")?(this.pageName=this.$t("top_rated",{name:this.$t("series")}),this.dataStore.url="/tv/top_rated?"):o().current("series.upcoming")&&(this.pageName=this.$t("upcoming",{name:this.$t("series")}),this.dataStore.url="/tv/airing_today?"),this.dataStore.getDiscover(),this.getFavorites(),localStorage.currentPage&&(this.dataStore.page=parseInt(localStorage.currentPage))},scroll(){window.scrollTo({top:0,behavior:"smooth"})},getFavorites(){this.user&&this.favoriteStore.getFavorites(this.user.id)}},watch:{page(e){localStorage.currentPage=e,this.searchStore.searching?(this.searchStore.searchPage=e,this.searchStore.getSearch()):(this.dataStore.page=e,this.dataStore.getDiscover()),this.scroll()},translate(){this.dataStore.getDiscover()},genres(){this.dataStore.genres=this.filterStore.selectedGenres,this.dataStore.getDiscover()},refresh(){this.getFavorites()}},mounted(){this.getRoutes()}}),oe={class:"text-center"};function ie(e,i,b,F,k,C){const u=r("PageHeader"),c=r("FilterButton"),f=r("Filter"),m=r("Cards"),_=r("v-pagination");return n(),d(S,null,[t(u,{title:e.pageName},null,8,["title"]),t(c,{onClick:i[0]||(i[0]=h=>e.filterStore.drawer=!0)}),p("h1",oe,l(e.pageName),1),t(f),t(m,{results:e.data.results},null,8,["results"]),t(_,{modelValue:e.dataStore.page,"onUpdate:modelValue":i[1]||(i[1]=h=>e.dataStore.page=h),length:e.dataStore.totalPages,"total-visible":e.mobile?4:10,color:"secondary",class:"my-4"},null,8,["modelValue","length","total-visible"])],64)}const ue=$(se,[["render",ie]]);export{ue as default};
